{{- define "variables" -}}
{{- .Store.Set "hasTwic" true -}}
{{- .Store.Set "hasObscure" true -}}
{{- end -}}
{{- define "main" -}}
  {{ partial "hero.html" . }}
  {{/* 
    {{ partial "chyron.html" (dict "pages" (where .Site.RegularPages "Section" "portfolio")) }}
  */}}
  {{ with .Params.snapshot }}
  <section class="[ full-width content-grid bg:blue--50 ]" aria-labelledby="snapshot-heading">
    <div class="[ grid middle lg:col--2 lg:col-gap--4 col-gap--2 row-gap--2 section--padding ]">
        <div class="[ o--2 ]">
          <h2 id="snapshot-heading">{{ .heading | safeHTML }}</h2>
            <p>{{ .text }}</p>
            <ul class="[ benefits ][ mb--1 ]">
              {{ range .benefits }}
              <li class="[ benefit ][ flex col-gap--0.5 ]">
                <span class="[ icon ][ pt--0.35 ]">{{ readFile "static/icons/circle-check.svg" | safeHTML }}</span>
                <span>{{ .text | markdownify}}</span>
              </li>
              {{end }}
            </ul>
            <p><strong>Stop missing out on customers</strong> â€” get a website that works for you.</p>
          <div class="[ flex flex--column lg:flex--row col-gap--1 row-gap--0.5 ]">
            {{ partial "buttons/ghost.html" (dict "url" "/about-us" "text" "More About Us")}}
            {{ partial "buttons/primary.html" (dict "url" "/contact-us/" "text" "Get Your Quote")}}
          </div>
      </div>
      <div class="[ o--1 ]">
        {{partial "image.html" (dict "image" .image "ratio" "1:1" "helper" "r--10" "page" $)}}
      </div>
    </div>
</section>
  {{ end }}
  {{ partial "services.html" . }}
  <section class="[ full-width content-grid layout--spacing section--padding bg:blue--50" aria-labelledby="portfolio-heading">
    <div class="[ lg:flex between ]">
      <div>
        <h2 id="portfolio-heading" class="[ grid row-gap--0.5 ]">
          <span class="[ key ][ font--5 upper clever--blue ]">Recent Work</span>
          <span>From Our Portfolio</span>
        </h2>
        <p class="[ font--4 ch--35 ]">See how we've helped Bahamian businesses with modern, results-driven websites.</p>
      </div>
      <div>
        {{ partial "buttons/ghost.html" (dict "url" "/portfolio" "text" "See Our Work")}}
      </div>
    </div>
    {{ with site.GetPage "section" "portfolio" }}
      {{ $items := first 3 (.Pages.ByWeight) }}
      {{ partial "projects.html" (dict "pages" $items ) }}
    {{ end }}
  </section>
  {{ with .Params.features }}
  <section class="[ features ]" aria-labelledby="features-heading">
    <div class="[ grid section--padding layout--spacing ]">
      <div class="[ grid center text--center ]">
        <h2 id="features-heading" class="[ grid row-gap--0.5 ]">
          <span class="[ key ][ font--5 upper ]">{{ .key }}</span>
          <span>{{ .headline }}</span>
        </h2>
        <p class="[ font--4 ch--35 ]">{{ .subhead }}</p>
      </div>
      <ul class="[ grid md:col--2 lg:col--3 gap--2 ]">
        {{ range .items }}
        <li class="[ feature ][ grid row-gap--0.5 ]">
          <div class="[ feature__heading ][ flex middle col-gap--0.5 pb--0 ]">
            {{ with $.Resources.GetMatch .icon }}
            <div class="[ icon ]">
              {{ .Content | safeHTML }}
            </div>
            {{ end }}
            <h3 class="[ pb--0 ]">{{ .title }}</h3>
          </div>
          <p>{{ .description }}</p>
        </li>
        {{ end }}
      </ul>
    </div>
  </section>
  {{ end }}
  {{ partial "reviews/reviews.html" . }}
  {{ partial "faqs.html" . }}
  {{- /* Latest Insights for the homepage (no pagination) */ -}}
  {{- $posts := sort (where site.RegularPages "Section" "insights") "Date" "desc" -}}
  {{- $items := first 3 $posts -}}
  {{- if gt (len $items) 0 -}}
    {{- $insightsList := site.GetPage "section" "insights" -}}
  
    <section class="[ full-width content-grid bg:blue--50 section--padding layout--spacing ]" aria-labelledby="insights-heading">
      <div class="[ lg:flex between middle ]">
        <div>
          <h2 id="insights-heading" class="[ key ][ font--5 upper ]">Insights</h2>
          <h3 class="[ font--2 ]">Tips &amp; Tricks To Help Your Business Grow</h3>
          <p class="[ ch--35 ]">Practical tips and expert advice to help you grow your online presence.</p>
        </div>
  
        <div>
          {{- with $insightsList -}}
            {{ partial "buttons/ghost.html" (dict "text" "See All Posts" "url" "/insights/")}}
          {{- end -}}
        </div>
      </div>
  
      {{ partial "insights/loop.html" (dict "pages" $items) }}
    </section>
  {{- end -}}
  
  {{ partial "cta.html" (dict "page" . "bg" true) }} 
{{- end -}}
